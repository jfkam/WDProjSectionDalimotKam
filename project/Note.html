<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="images/Logo.png" type="image/png">
    <meta charset="UTF-8">
    <title>Send A Note</title>
    <link rel="stylesheet" href="note.css">
</head>

<body>

    <header>
        <img src="images/Logo.png" class="site-logo">
        <h1>Hello, <span id="username">User</span></h1>


        <nav class="nav-bar">
            <a href="Home.html">Home</a>
            <a href="About.html">About</a>
            <a href="Help.html">Need Help?</a>
            <a href="Vent.html">Vent Space</a>
            <a href="Sources.html">Sources</a>
        </nav>
    </header>

    <h2 class="send-title">Send A Note</h2>

    <div class="letter-container">
        <img src="images/noteentry.png" class="letter-img">

        <textarea id="noteInput" 
                  class="paper-area"
                  placeholder="Write something anonymous..."></textarea>
    </div>

<button class="send-btn">Send</button>

    <section class="notes-section">
        <h3 class="notes-title">ðŸ“® Other Notes</h3>
        <div id="notesList"></div>
    </section>

    <footer>
        <p class="copyright"> &copy; <span id="year"></span> Dalimot, Kam 2025. All rights reserved.</p>
    </footer>

    <script>
       
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("username").innerText = localStorage.getItem("currentUser") || "User";
            document.getElementById("year").innerText = new Date().getFullYear();
            displayNotes();


            document.querySelector(".send-btn").addEventListener("click", submitNote);
        });

        function submitNote() {
            const noteInput = document.getElementById("noteInput");
            const text = noteInput.value.trim();
            if (!text) { alert("Please write something first!"); return; }

            let notes = [];
            try {
                notes = JSON.parse(localStorage.getItem("notes")) || [];
                if (!Array.isArray(notes)) notes = [];
            } catch (e) { notes = []; }

            notes.push({ text: text, timestamp: new Date().toLocaleString() });

            localStorage.setItem("notes", JSON.stringify(notes));
            noteInput.value = "";
            displayNotes();
        }

        function displayNotes() {
            const notesList = document.getElementById("notesList");
            notesList.innerHTML = "";

            let notes = [];
            try {
                notes = JSON.parse(localStorage.getItem("notes")) || [];
                if (!Array.isArray(notes)) notes = [];
            } catch (e) { notes = []; }

            if (notes.length === 0) {
                notesList.innerHTML = "<p>No notes yet. Be the first to send one!</p>";
                return;
            }

            notes.forEach(note => {
                const div = document.createElement("div");
                div.className = "note";
                div.innerHTML = `<p>${note.text}</p><span class="note-timestamp">${note.timestamp}</span>`;
                notesList.appendChild(div);
            });
        }
    </script>


</body>
</html>